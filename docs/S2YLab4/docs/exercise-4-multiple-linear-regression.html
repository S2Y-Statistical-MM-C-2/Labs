<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Exercise 4: Multiple linear regression | Lab 4 - Exploring relationships and Understanding correlation</title>
  <meta name="description" content="5 Exercise 4: Multiple linear regression | Lab 4 - Exploring relationships and Understanding correlation" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Exercise 4: Multiple linear regression | Lab 4 - Exploring relationships and Understanding correlation" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Exercise 4: Multiple linear regression | Lab 4 - Exploring relationships and Understanding correlation" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exercise-3-spurious-correlation.html"/>
<link rel="next" href="exercise-5-identifying-relationships.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to Lab 3</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#credit-where-credit-is-due"><i class="fa fa-check"></i><b>1.1</b> Credit where credit is due</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="exercise-1---chi-squared-test-for-association.html"><a href="exercise-1---chi-squared-test-for-association.html"><i class="fa fa-check"></i><b>2</b> Exercise 1 - Chi-squared test for association</a>
<ul>
<li class="chapter" data-level="2.1" data-path="exercise-1---chi-squared-test-for-association.html"><a href="exercise-1---chi-squared-test-for-association.html#contingency-tables"><i class="fa fa-check"></i><b>2.1</b> Contingency tables</a></li>
<li class="chapter" data-level="2.2" data-path="exercise-1---chi-squared-test-for-association.html"><a href="exercise-1---chi-squared-test-for-association.html#hypothesis-testing"><i class="fa fa-check"></i><b>2.2</b> Hypothesis Testing</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exercise-2-simple-linear-regression-slr.html"><a href="exercise-2-simple-linear-regression-slr.html"><i class="fa fa-check"></i><b>3</b> Exercise 2: Simple linear regression (SLR)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exercise-2-simple-linear-regression-slr.html"><a href="exercise-2-simple-linear-regression-slr.html#creating-scatterplots"><i class="fa fa-check"></i><b>3.1</b> Creating scatterplots</a></li>
<li class="chapter" data-level="3.2" data-path="exercise-2-simple-linear-regression-slr.html"><a href="exercise-2-simple-linear-regression-slr.html#fitting-a-linear-model"><i class="fa fa-check"></i><b>3.2</b> Fitting a linear model</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exercise-3-spurious-correlation.html"><a href="exercise-3-spurious-correlation.html"><i class="fa fa-check"></i><b>4</b> Exercise 3: Spurious correlation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="exercise-3-spurious-correlation.html"><a href="exercise-3-spurious-correlation.html#investigating-a-relationship-with-regression"><i class="fa fa-check"></i><b>4.1</b> Investigating a relationship with regression</a></li>
<li class="chapter" data-level="4.2" data-path="exercise-3-spurious-correlation.html"><a href="exercise-3-spurious-correlation.html#further-analsyis-with-a-correlation-coefficient"><i class="fa fa-check"></i><b>4.2</b> Further analsyis with a Correlation Coefficient</a></li>
<li class="chapter" data-level="4.3" data-path="exercise-3-spurious-correlation.html"><a href="exercise-3-spurious-correlation.html#spurious-correlation"><i class="fa fa-check"></i><b>4.3</b> Spurious Correlation</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="exercise-4-multiple-linear-regression.html"><a href="exercise-4-multiple-linear-regression.html"><i class="fa fa-check"></i><b>5</b> Exercise 4: Multiple linear regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="exercise-4-multiple-linear-regression.html"><a href="exercise-4-multiple-linear-regression.html#exploratory-analysis"><i class="fa fa-check"></i><b>5.1</b> Exploratory analysis</a></li>
<li class="chapter" data-level="5.2" data-path="exercise-4-multiple-linear-regression.html"><a href="exercise-4-multiple-linear-regression.html#fitting-a-linear-model-1"><i class="fa fa-check"></i><b>5.2</b> Fitting a linear model</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="exercise-5-identifying-relationships.html"><a href="exercise-5-identifying-relationships.html"><i class="fa fa-check"></i><b>6</b> Exercise 5: Identifying relationships</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lab 4 - Exploring relationships and Understanding correlation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exercise-4-multiple-linear-regression" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Exercise 4: Multiple linear regression<a href="exercise-4-multiple-linear-regression.html#exercise-4-multiple-linear-regression" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Hydrostatic weighing, also known as underwater weighing or hydrodensitometry, is one of the most accurate ways to measure body fat.</p>
<p>The body fat of 78 high school wrestlers was measured using three separate techniques, namely hydrostatic weighing, skin fold measurements and the Tanita body fat scale. The results are stored in the data set <code>HSwrestler</code> in the <code>PASWR</code> package.</p>
<p>Read in the data using:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="exercise-4-multiple-linear-regression.html#cb33-1" tabindex="-1"></a><span class="fu">library</span>(PASWR)</span>
<span id="cb33-2"><a href="exercise-4-multiple-linear-regression.html#cb33-2" tabindex="-1"></a>HSWRESTLER <span class="ot">&lt;-</span> HSwrestler</span></code></pre></div>
<p>The data set contains nine columns, described as follows:</p>
<ul>
<li><code>AGE</code>: age of wrestler in years</li>
<li><code>HT</code>: height of wrestler in inches</li>
<li><code>WT</code>: weight of wrestler in pounds</li>
<li><code>ABS</code>: abdominal fat</li>
<li><code>TRICEPS</code>: tricep fat</li>
<li><code>SUBSCAP</code>: subscapular fat</li>
<li><code>HWFAT</code>: hydrostatic fat</li>
<li><code>TANFAT</code>: Tanita fat</li>
<li><code>SKFAT</code>: skin fat</li>
</ul>
<p>This can be seen by typing:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="exercise-4-multiple-linear-regression.html#cb34-1" tabindex="-1"></a><span class="fu">names</span>(HSWRESTLER)</span></code></pre></div>
<p>In this example, it is of interest to investigate how hydrostatic fat (<code>HWFAT</code>) is related to abdominal fat (<code>ABS</code>) and tricep fat (<code>TRICEPS</code>).</p>
<div id="exploratory-analysis" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Exploratory analysis<a href="exercise-4-multiple-linear-regression.html#exploratory-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>TASK 1</strong></p>
<ol style="list-style-type: lower-alpha">
<li><p>Produce scatterplots of <code>HWFAT</code> (y) against Lactic <code>ABS</code> (x), and <code>HWFAT</code> (y) against <code>TRICEPS</code> (x).</p></li>
<li><p>Describe the relationship between <code>HWFAT</code> (y), <code>ABS</code> (x) and <code>TRICEPS</code>.</p></li>
</ol>
</div>
<div id="fitting-a-linear-model-1" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Fitting a linear model<a href="exercise-4-multiple-linear-regression.html#fitting-a-linear-model-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In Example 1, the function <code>lm()</code> was used to find estimates for parameters of a simple linear regression model. The same function can be used for multiple linear regression models by specifying the explanatory variables on the right side of the tilde (~) operator inside the <code>lm()</code> function.</p>
<p>To build a multiple linear regression model with <code>hwfat</code> as the response variable and <code>abs</code> and <code>triceps</code> (tricep fat) as explanatory variables, type:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="exercise-4-multiple-linear-regression.html#cb35-1" tabindex="-1"></a><span class="fu">lm</span>(HWFAT <span class="sc">~</span> ABS <span class="sc">+</span> TRICEPS, <span class="at">data =</span> HSWRESTLER)</span></code></pre></div>
<p>Note down the equation of the fitted line from that is given:</p>
<center>
<code>HWFAT</code> = <input class='webex-solveme nospaces' size='9' data-answer='["2.0590398","2.05904","2.0590","2.059","2.06"]'/> + <input class='webex-solveme nospaces' size='9' data-answer='["0.3370839","0.337084","0.33708","0.3371","0.337","0.34"]'/> <code>ABS</code> + <input class='webex-solveme nospaces' size='10' data-answer='["0.50","0.504","0.5043","0.50430","0.504303","0.5043030 "]'/> <code>TRICEPS</code>
</center>
<p><br>
<strong>QUESTION</strong>: Interpret what each coefficient means.</p>
<ul>
<li><p>For every unit increase in abdominal fat, hydrostatic fat is expected to <select class='webex-select'><option value='blank'></option><option value='answer'>increase</option><option value=''>decrease</option></select> by <select class='webex-select'><option value='blank'></option><option value='answer'>0.337</option><option value=''>0.504</option><option value=''>2.059</option></select> unit, <select class='webex-select'><option value='blank'></option><option value=''>regardless of tricep fat</option><option value='answer'>while holding tricep fat constant</option></select>.</p></li>
<li><p>For every unit increase in tricep fat, hydrostatic fat is expected to <select class='webex-select'><option value='blank'></option><option value='answer'>increase</option><option value=''>decrease</option></select> by <select class='webex-select'><option value='blank'></option><option value=''>0.337</option><option value='answer'>0.504</option><option value=''>2.059</option></select> unit, <select class='webex-select'><option value='blank'></option><option value=''>regardless of abdominal fat</option><option value='answer'>while holding abdominal fat constant</option></select>.</p></li>
</ul>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Check Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Check Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="exercise-3-spurious-correlation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercise-5-identifying-relationships.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
