<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Optional activity: more on log-transformation | main.knit</title>
  <meta name="description" content="S2Y Lab 5<br />
Further examination on model fit and assumptions - ANOVA, residual plots and transformations</div>" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Optional activity: more on log-transformation | main.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Optional activity: more on log-transformation | main.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="example-2-power-transformation-on-y.html"/>
<link rel="next" href="solution.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to S2Y Lab 5</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="example-1-log-transformation-on-x.html"><a href="example-1-log-transformation-on-x.html"><i class="fa fa-check"></i><b>2</b> Example 1: log-transformation on <span class="math inline">\(x\)</span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="example-1-log-transformation-on-x.html"><a href="example-1-log-transformation-on-x.html#exploratory-analysis"><i class="fa fa-check"></i><b>2.1</b> Exploratory analysis</a></li>
<li class="chapter" data-level="2.2" data-path="example-1-log-transformation-on-x.html"><a href="example-1-log-transformation-on-x.html#statistical-analysis"><i class="fa fa-check"></i><b>2.2</b> Statistical analysis</a></li>
<li class="chapter" data-level="2.3" data-path="example-1-log-transformation-on-x.html"><a href="example-1-log-transformation-on-x.html#assumption-checking"><i class="fa fa-check"></i><b>2.3</b> Assumption checking</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="example-2-power-transformation-on-y.html"><a href="example-2-power-transformation-on-y.html"><i class="fa fa-check"></i><b>3</b> Example 2: power transformation on <span class="math inline">\(y\)</span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="example-2-power-transformation-on-y.html"><a href="example-2-power-transformation-on-y.html#exploratory-analysis-1"><i class="fa fa-check"></i><b>3.1</b> Exploratory analysis</a></li>
<li class="chapter" data-level="3.2" data-path="example-2-power-transformation-on-y.html"><a href="example-2-power-transformation-on-y.html#assumption-checking-1"><i class="fa fa-check"></i><b>3.2</b> Assumption checking</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="example-2-power-transformation-on-y.html"><a href="example-2-power-transformation-on-y.html#regression-output"><i class="fa fa-check"></i><b>3.2.1</b> Regression output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="optional-activity-more-on-log-transformation.html"><a href="optional-activity-more-on-log-transformation.html"><i class="fa fa-check"></i><b>4</b> Optional activity: more on log-transformation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="optional-activity-more-on-log-transformation.html"><a href="optional-activity-more-on-log-transformation.html#log-transformation-on-y"><i class="fa fa-check"></i><b>4.1</b> Log-transformation on <span class="math inline">\(y\)</span></a></li>
<li class="chapter" data-level="4.2" data-path="optional-activity-more-on-log-transformation.html"><a href="optional-activity-more-on-log-transformation.html#log-transformation-on-both-x-and-y"><i class="fa fa-check"></i><b>4.2</b> log-transformation on both <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="solution.html"><a href="solution.html"><i class="fa fa-check"></i><b>5</b> Solution</a>
<ul>
<li class="chapter" data-level="5.1" data-path="solution.html"><a href="solution.html#task-1"><i class="fa fa-check"></i><b>5.1</b> Task 1</a></li>
<li class="chapter" data-level="5.2" data-path="solution.html"><a href="solution.html#task-2"><i class="fa fa-check"></i><b>5.2</b> Task 2</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><div class="line-block">S2Y Lab 5<br />
Further examination on model fit and assumptions - ANOVA, residual plots and transformations</div></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="optional-activity-more-on-log-transformation" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Optional activity: more on log-transformation<a href="optional-activity-more-on-log-transformation.html#optional-activity-more-on-log-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The following two datasets may be explored to understand the effect of applying log-transformation on <span class="math inline">\(y\)</span> only and on both <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>.</p>
<p>Remark: Identifying the appropriate transformation to address violation of assumptions is beyond the scope of this course.</p>
<div id="log-transformation-on-y" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Log-transformation on <span class="math inline">\(y\)</span><a href="optional-activity-more-on-log-transformation.html#log-transformation-on-y" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Log-transforming the response variable may be considered when the assumptions of constant variances and/or non-normality are violated. As an added bonus, transforming the response variable may also help mitigate the problem of a curved relationship. To understand the effect of log-transforming <span class="math inline">\(y\)</span>, we look at a (fictional) salary data from the (fictional) company Initech.</p>
<p><strong>Data: initech.csv</strong></p>
<p><strong>Columns:</strong></p>
<div class="line-block">              <strong>C1:   years of experience</strong></div>
<div class="line-block">              <strong>C2:   salary</strong></div>
<p><br>
<strong>TASK 1</strong></p>
<ol style="list-style-type: lower-alpha">
<li>Produce a scatterplot of salary versus years. What can we say about this relationship?</li>
<li>Fit a simple linear regression model to predict salary from year. Interpret the estimated parameters.</li>
<li>Produce residual plots and comment on the assumptions for the simple linear regression model.</li>
<li>Repeat the above using <span class="math inline">\(\log\)</span>(salary) and compare the residual plots.</li>
<li>Using the model with the transformed response <span class="math inline">\(\log(Y)\)</span>, predict the salary for someone with 10 years of experience.</li>
</ol>
<div class="webex-solution">
<button>
Hint
</button>
<p>After back transformation, <span class="math inline">\(Y=e^{\alpha} e^{\beta x}\)</span>.</p>
</div>
</div>
<div id="log-transformation-on-both-x-and-y" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> log-transformation on both <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span><a href="optional-activity-more-on-log-transformation.html#log-transformation-on-both-x-and-y" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Log-transforming both the response variable and the predictor variable may be useful in the scenario that the relationship is non-linear and the errors are not normal and have unequal variances.</p>
<p><strong>Source</strong>: Allison, T., &amp; Cicchetti, D. V. (1976). Sleep in mammals: ecological and constitutional correlates. Science, 194(4266), 732-734.</p>
<p><strong>Context</strong>: The original data were used for analysing the relationship between constitutional and ecological factors and sleeping (dreaming and non-dreaming) in mammals. Constitutional variables such as life span, body weight, brain weight and gestation time were evaluated. Ecological variables such as severity of predation, safety of sleeping place and overall danger were inferred from field observations in the literature. We are interested in finding out if how body weight and brain weight are related.</p>
<p><strong>Data: mammals.csv</strong></p>
<p><strong>Columns:</strong></p>
<div class="line-block">              <strong>C1:   body_wt   years of experience</strong></div>
<div class="line-block">              <strong>C2:   brain_wt  salary</strong></div>
<p><br>
<strong>TASK 2</strong></p>
<ol style="list-style-type: lower-alpha">
<li>Produce scatterplots of body weight versus brain weight, using both original variables and log-transformed variables. Which pair seems to have a linear relationship?</li>
<li>Fit a simple linear regression model to describe the relationship between <span class="math inline">\(\log\)</span>(body weight) and <span class="math inline">\(\log\)</span>(brain weight).</li>
<li>Examine the fit of the model using the coefficient of determination, <span class="math inline">\(R^2\)</span>, as well as residual plots.</li>
<li>Interpret the estimated parameters and use them to estimate the mean body weight with brain weight of your choice.</li>
</ol>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="example-2-power-transformation-on-y.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="solution.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
